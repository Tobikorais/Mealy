from flask import Flask, jsonify, request
from flask_cors import CORS
import time

app = Flask(__name__)
CORS(app)

# In-memory data for demo purposes
users = [
    {"username": "admin", "password": "admin", "type": "admin"},

    {"username": "customer", "password": "customer", "type": "customer"},
]

meals = [
    # ... (your meals data as before)
]

orders = [
    # ... (your orders data as before)
]

@app.route("/api/signup", methods=["POST"])
def signup():
    data = request.json
    username = data.get("username")
    password = data.get("password")
    if not username or not password:
        return jsonify({"error": "Username and password required"}), 400
    if any(u["username"] == username for u in users):
        return jsonify({"error": "Username already exists"}), 409
    users.append({"username": username, "password": password, "type": "customer"})
    return jsonify({"message": "Signup successful", "type": "customer"}), 201

@app.route("/api/auth", methods=["POST"])
def auth():
    data = request.json
    username = data.get("username")
    password = data.get("password")
    for user in users:
        if user["username"] == username and user["password"] == password:
            return jsonify({"type": user["type"]})
    return jsonify({"error": "Invalid credentials"}), 401

# ... (meals and orders endpoints as before)

if __name__ == "__main__":
    app.run(debug=True, port=5000) 
